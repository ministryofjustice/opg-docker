{
    {{if exists "/opg/ca/csr/cn"}}
    "CN": "{{ getv "/opg/ca/csr/cn" }}",
    {{end}}

    "key": {
        "algo": "rsa",
        "size": 2048
    },

    "hosts": [
    {{if exists "/opg/ca/csr/host" }}
      {{ $hosts := split (getv "/opg/ca/csr/hosts") "," }}
      {{range $hosts}}
        "{{.}}",
      {{end}}
    {{end}}
      "{{ getv "/hostname" }}.{{ getv "/opg/ca/domain" }}"
    ],

    "names": [
        {
            "C": "UK",
            "L": "England",
            "O": "OPG Digital",
            "ST": "AWS"
        }
    ]
}
