{
    {{if exists "/opg/ca/csr/cn"}}
    "CN": "{{ getv "/opg/ca/csr/cn" }}",
    {{end}}

    "key": {
        "algo": "rsa",
        "size": 2048
    },

    "hosts": [
    {{ $hosts := split (getv "/opg/ca/csr/hosts") "," }}
    {{range $hosts}}
      "{{.}}",
    {{end}}
    "{{ getv "/hostname" }}"
    ],

    "names": [
        {
            "C": "UK",
            "L": "England",
            "O": "OPG Digital",
            "ST": "AWS"
        }
    ]
}
